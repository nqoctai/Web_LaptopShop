@model Web_Laptopshop.ViewModel.SanPhamVM
@using Web_Laptopshop.Models
@using System.Globalization;
@{
    ViewBag.Title = "ChiTietSanPham";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container py-5">
    <div class="row g-4 mb-5">
        <div>
            <!-- Breadcrumb Navigation -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb bg-light p-3 rounded">
                    <li class="breadcrumb-item">
                        <a href="/" class="text-decoration-none">Home</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                        Chi tiết sản phẩm
                    </li>
                </ol>
            </nav>
        </div>
        <div class="col-lg-8 col-xl-9">
            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="border rounded">
                        @*<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img class="d-block w-100" src="~/Content/Upload/HinhAnh/@Model.HinhAnhDaiDien.HinhAnhUrl" alt="First slide">
                                    </div>
                                    @foreach (var hinhAnh in Model.listHinhAnh)
                                    {
                                        <div class="carousel-item">
                                            <img class="d-block w-100" src="~/Content/Upload/HinhAnh/@hinhAnh.HinhAnhUrl" alt="Second slide">
                                        </div>
                                    }

                                </div>
                                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>*@
                        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                            <div class="carousel-inner">
                                @if (Model.HinhAnhDaiDien != null)
                                {
                                    <!-- Thiết lập ảnh đầu tiên là "active" -->
                                    <div class="carousel-item active">
                                        <img class="d-block w-100" src="~/Content/Upload/HinhAnh/@Model.HinhAnhDaiDien" alt="First slide" />
                                    </div>
                                    if (Model.listHinhAnh != null && Model.listHinhAnh.Any())
                                    {
                                    <!-- Duyệt qua danh sách các ảnh còn lại -->
                                        for (int i = 0; i < Model.listHinhAnh.Count; i++)
                                        {
                                            <div class="carousel-item">
                                                <img class="d-block w-100" src="~/Content/Upload/HinhAnh/@Model.listHinhAnh[i].HinhAnhUrl" alt="Slide @i" />
                                            </div>
                                        }
                                    }
                                }
                                else
                                {
                                    <!-- Hiển thị ảnh mặc định nếu không có ảnh trong danh sách -->
                                    <div class="carousel-item active">
                                        <img class="d-block w-100" src="~/Content/Upload/HinhAnh/default.jpg" alt="No image available" />
                                    </div>
                                }
                            </div>

                            <!-- Điều khiển carousel -->
                            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>

                        @*<a href="#">

                                    @if (Model.HinhAnhDaiDien != null)
                                    {
                                       <img src="~/Content/Upload/HinhAnh/@Model.HinhAnhDaiDien.HinhAnhUrl" class="img-fluid rounded" alt="Image" style="width: 600px; height: 333px;">
                                    }



                            </a>*@
                    </div>
                </div>
                <div class="col-lg-6">
                    <h4 class="fw-bold mb-3"> @Model.SanPham.TenSanPham </h4>
                    <p class="mb-3">ASUS</p>
                    <h5 class="fw-bold mb-3">
                        @Model.SanPham.TenSanPham

                    </h5>
                    <div class="d-flex mb-4">
                        <i class="fa fa-star text-secondary"></i>
                        <i class="fa fa-star text-secondary"></i>
                        <i class="fa fa-star text-secondary"></i>
                        <i class="fa fa-star text-secondary"></i>
                        <i class="fa fa-star"></i>
                    </div>
                    <p class="mb-4">
                        @Model.SanPham.TieuDe
                    </p>

                    <div class="input-group quantity mb-4" style="width: 100px;">
                        <div class="input-group-btn">
                            <button class="btn btn-sm btn-minus rounded-circle bg-light border">
                                <i class="fa fa-minus"></i>
                            </button>
                        </div>
                        <input type="text" class="form-control form-control-sm text-center border-0" value="1"
                               data-cart-detail-index="0">
                        <div class="input-group-btn">
                            <button class="btn btn-sm btn-plus rounded-circle bg-light border">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <input class="form-control d-none" type="text" name="id" />

                    <input class="form-control d-none" type="text" name="quantity" id="cartDetails0.quantity"
                           value="1" />
                    <a class="btn btn-primary" href="/Home/ThemMatHang/?msp=@Model.SanPham.Id">
                        <i class="fa fa-shopping-bag me-2 text-primary"></i>
                        Add to cart
                    </a>
                    <!-- </form> -->

                </div>
                <div class="col-lg-12">
                    <nav>
                        <div class="nav nav-tabs mb-3">
                            <button class="nav-link active border-white border-bottom-0" type="button"
                                    role="tab" id="nav-about-tab" data-bs-toggle="tab" data-bs-target="#nav-about"
                                    aria-controls="nav-about" aria-selected="true">
                                Mô tả
                            </button>
                            <button class="nav-link border-white border-bottom-0" type="button" role="tab"
                                    id="nav-mission-tab" data-bs-toggle="tab" data-bs-target="#nav-mission"
                                    aria-controls="nav-mission" aria-selected="false">
                                Đánh giá
                            </button>
                        </div>
                    </nav>
                    <div class="tab-content mb-5">
                        <div class="tab-pane active" id="nav-about" role="tabpanel"
                             aria-labelledby="nav-about-tab">
                            <div class="mb-3 p-4 bg-light rounded shadow-sm">
                                <h5 class="fw-bold text-primary">ASUS TUF Gaming F15 FX506HF HN017W</h5>
                                <p class="text-muted" style="font-size: 1.1em;">
                                    @foreach (MoTaSanPham mt in ViewBag.ListMoTa)
                                    {
                                        if (mt.MoTa.LinhKien == null)
                                        {
                                            <span>@mt.MoTa.NoiDung</span>
                                        }

                                    }
                                </p>
                                @if (Model.SanPham.LoaiSanPham.TenLoai == "Laptop")
                                {
                                    <div class="p-4 bg-white rounded shadow-sm">
                                        <h6 class="fw-bold mb-3 text-uppercase text-primary">Thông số kỹ thuật</h6>
                                        <table class="table table-striped table-borderless">
                                            <thead>
                                                <tr class="bg-primary text-white">
                                                    <th scope="col" style="width: 30%;">Thông số</th>
                                                    <th scope="col" style="width: 70%;">Chi tiết</th>
                                                </tr>
                                            </thead>

                                            <tbody class="text-muted">
                                                @{
                                    List<MoTaSanPham> listMota = ViewBag.ListMoTa as List<MoTaSanPham>;
                                    <tr>
                                        <th scope="row">Hệ điều hành</th>
                                        <td>
                                            @{
                                    var heDieuHanh = listMota.FirstOrDefault(x => x.MoTa != null && x.MoTa.LinhKien != null && x.MoTa.LinhKien.TenLinhKien == "HeDieuHanh");
                                    string noiDungHDH = "";
                                    if (heDieuHanh != null && heDieuHanh.MoTa != null)
                                    {
                                        noiDungHDH = heDieuHanh.MoTa.NoiDung;
                                    }
                                        }
                                        @noiDungHDH
                                    </td>
                                </tr>
                                                    <tr>
                                                        <th scope="row">CPU</th>
                                                        <td>
                                                            @{
                                    var cpu = listMota.FirstOrDefault(x => x.MoTa != null && x.MoTa.LinhKien != null && x.MoTa.LinhKien.TenLinhKien == "CPU");
                                    string noiDungCPU = "";
                                    if (cpu != null && cpu.MoTa != null)
                                    {
                                        noiDungCPU = cpu.MoTa.NoiDung;
                                    }
                                                        }
                                                        @noiDungCPU
                                                    </td>
                                                </tr>
                                                    <tr>
                                                        <th scope="row">Card đồ họa</th>
                                                        <td>
                                                            @{
                                    var cardDoHoa = listMota.FirstOrDefault(x => x.MoTa != null && x.MoTa.LinhKien != null && x.MoTa.LinhKien.TenLinhKien == "CardManHinh");
                                    string noiDungCard = "";
                                    if (cardDoHoa != null && cardDoHoa.MoTa != null)
                                    {
                                        noiDungCard = cardDoHoa.MoTa.NoiDung;
                                    }
                                                        }
                                                        @noiDungCard
                                                    </td>
                                                </tr>
                                                    <tr>
                                                        <th scope="row">Màn hình</th>
                                                        <td>
                                                            @{
                                    var manHinh = listMota.FirstOrDefault(x => x.MoTa != null && x.MoTa.LinhKien != null && x.MoTa.LinhKien.TenLinhKien == "ManHinh");
                                    string noiDungManHinh = "";
                                    if (manHinh != null && manHinh.MoTa != null)
                                    {
                                        noiDungManHinh = manHinh.MoTa.NoiDung;
                                    }
                                                        }
                                                        @noiDungManHinh
                                                    </td>
                                                </tr>
                                                    <tr>
                                                        <th scope="row">RAM</th>
                                                        <td>
                                                            @{
                                    var ram = listMota.FirstOrDefault(x => x.MoTa != null && x.MoTa.LinhKien != null && x.MoTa.LinhKien.TenLinhKien == "RAM");
                                    string noiDungRAM = "";
                                    if (ram != null && ram.MoTa != null)
                                    {
                                        noiDungRAM = ram.MoTa.NoiDung;
                                    }
                                                        }
                                                        @noiDungRAM
                                                    </td>
                                                </tr>
                                                    <tr>
                                                        <th scope="row">ROM</th>
                                                        <td>
                                                            @{
                                    var rom = listMota.FirstOrDefault(x => x.MoTa != null && x.MoTa.LinhKien != null && x.MoTa.LinhKien.TenLinhKien == "ROM");
                                    string noiDungROM = "";
                                    if (rom != null && rom.MoTa != null)
                                    {
                                        noiDungROM = rom.MoTa.NoiDung;
                                    }
                                                        }
                                                        @noiDungROM
                                                    </td>
                                                </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                }
                            </div>

                        </div>
                        <div class="tab-pane" id="nav-mission" role="tabpanel"
                             aria-labelledby="nav-mission-tab">
                            <div class="d-flex">
                                <img src="img/avatar.jpg" class="img-fluid rounded-circle p-3"
                                     style="width: 100px; height: 100px;" alt="">
                                <div class="">
                                    <p class="mb-2" style="font-size: 14px;">12 Tháng Tư, 2024</p>
                                    <div class="d-flex justify-content-between">
                                        <h5>Đặng Ngọc Tài</h5>
                                        <div class="d-flex mb-3">
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                    </div>
                                    <p>Laptop này rất tuyệt vời, vừa mạnh vừa rẻ, phù hợp với sinh viên, đúng với tiêu chí ngon - bổ - rẻ, rất khuyến khích mọi người mua.</p>
                                </div>
                            </div>
                            <div class="d-flex">
                                <img src="img/avatar.jpg" class="img-fluid rounded-circle p-3"
                                     style="width: 100px; height: 100px;" alt="">
                                <div class="">
                                    <p class="mb-2" style="font-size: 14px;">12 Tháng Tư, 2024</p>
                                    <div class="d-flex justify-content-between">
                                        <h5>Cao Đức Nghĩa</h5>
                                        <div class="d-flex mb-3">
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star text-secondary"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                    </div>
                                    <p class="text-dark">Khá ngon trong tầm giá, nhưng vẫn hơi nóng và nhiều lỗi vặt. Mong nhà sản xuất rút kinh nghiệm, nhưng bù lại thiết kế đẹp và thuộc dòng cao cấp.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <form action="#" class="p-4 bg-light rounded shadow-sm">
                    <h4 class="mb-4 fw-bold text-uppercase text-center text-primary">Để lại đánh giá</h4>
                    <div class="row g-3">

                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control border-0 shadow-sm rounded" id="nameInput" placeholder="Tên của bạn" required />
                                <label for="nameInput" class="text-muted">Tên của bạn *</label>
                            </div>
                        </div>


                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="email" class="form-control border-0 shadow-sm rounded" id="emailInput" placeholder="Email của bạn" required />
                                <label for="emailInput" class="text-muted">Email của bạn *</label>
                            </div>
                        </div>


                        <div class="col-12">
                            <div class="form-floating">
                                <textarea class="form-control border-0 shadow-sm rounded" placeholder="Để lại đánh giá của bạn ở đây" id="reviewTextarea" style="height: 73px; resize: none;" required></textarea>
                                <label for="reviewTextarea" class="text-muted">Đánh giá của bạn *</label>
                            </div>
                        </div>


                        <div class="col-12">
                            <div class="d-flex justify-content-between align-items-center py-3">
                                <div class="d-flex align-items-center">
                                    <span class="me-2 text-muted">Vui lòng đánh giá:</span>
                                    <div class="rating-stars">
                                        <i class="fa fa-star text-warning fs-5 me-1"></i>
                                        <i class="fa fa-star text-warning fs-5 me-1"></i>
                                        <i class="fa fa-star text-warning fs-5 me-1"></i>
                                        <i class="fa fa-star text-warning fs-5 me-1"></i>
                                        <i class="fa fa-star text-secondary fs-5"></i>
                                    </div>
                                </div>

                                <button type="submit" class="btn btn-success rounded-pill px-4 py-2 shadow-sm" style="border: none;">Gửi đánh giá</button>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div>
        <div class="col-lg-4 col-xl-3">
            <div class="row g-4 fruite">
                <div class="col-lg-12">
                    <div class="mb-4">
                        <h4>Thể Loại</h4>
                        <ul class="list-unstyled fruite-categorie">
                            @foreach (ThuongHieu th in ViewBag.ListThuongHieu)
                            {
                                <li>
                                    <div class="d-flex justify-content-between fruite-name">
                                        <a href="#"><i class="fas fa-apple-alt me-2"></i>@th.TenThuongHieu</a>
                                        <span>(3)</span>
                                    </div>
                                </li>
                            }


                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
